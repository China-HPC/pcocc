.\" Man page generated from reStructuredText.
.
.TH "PCOCC-EXEC" "1" "Aug 10, 2017" "0.3.1" "pcocc"
.SH NAME
pcocc-exec \- Execute commands through the pcocc guest agent
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
pcocc exec [OPTIONS] [CMD]...
.SH DECRIPTION
.sp
Execute commands through the guest agent
.sp
For this to work, the pcocc guest agent must be started in the guest. This is mostly available for internal use where we do not want to rely on a network connexion/ssh server.
.SH OPTIONS
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.TP
.B \-i, \-\-index [INTEGER]
Index of the VM on which the command should be executed
.TP
.B \-j, \-\-jobid [INTEGER]
Jobid of the selected cluster
.TP
.B \-J, \-\-jobname [TEXT]
Job name of the selected cluster
.TP
.B \-u, \-\-user [TEXT]
User id to use to execute the command
.TP
.B \-s, \-\-script
Cmd is a shell script to be copied to /tmp and executed in place
.TP
.B \-h, \-\-help
Show this message and exit.
.UNINDENT
.UNINDENT
.UNINDENT
.SH EXAMPLES
.SS Execute a command
.sp
To run a command in the first VM of the default job as the current user:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pcocc exec "hostname"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To run a command as root in the third VM of the job named \fIcentos\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pcocc exec \-J centos \-u root \-i 2 cat /etc/shadow
.ft P
.fi
.UNINDENT
.UNINDENT
.SS Send and execute a script
.sp
pcocc exec can copy a script to the target machine and execute it. Assuming  \fB\&./script.sh\fP contains
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
#!/bin/sh
echo "Hello from $(hostname)"
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
To execute it on the second VM of the default job as the current user:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
$ pccoc exec \-i 1 \-s ./script.sh
Hello from vm1
.ft P
.fi
.UNINDENT
.UNINDENT
.SH SEE ALSO
.sp
pcocc\-ssh(1), pcocc\-scp(1), pcocc\-exec(1), pcocc\-nc(1)
.SH AUTHOR
François Diakhaté
.SH COPYRIGHT
2017
.\" Generated by docutils manpage writer.
.
